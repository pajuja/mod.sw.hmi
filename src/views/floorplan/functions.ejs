function submitForm() {
	console.log("submit event");
	var fd = new FormData(document.getElementById("fileinfo"));
	fd.append("label", "WEBUPLOAD");
	$.ajax({
		url: "./api/fp",
		type: "POST",
		data: fd,
		processData: false,  // tell jQuery not to process the data
		contentType: false,   // tell jQuery not to set contentType
		enctype: 'multipart/form-data'
	}).done(function( data ) {
		console.log("Output:");
		console.log( data );
		$("#fileinfo").find("input[type=text], input[type=file], input[type=number], textarea").val("");							
		loadImage(data.imgurl, data._id, data.name, data.scale, data.xoffset, data.yoffset);				
	}).fail(function(xhr, status, err){
		alert(xhr.responseText);
	});
		return false;
}

function loadImage(path, id, name, scale, xoffset, yoffset) { 
	var floorPlanImage = new Image();
	floorPlanImage.onload = function() {		
		drawImageOnCanvas(floorPlanImage, "#overviewFloorplan");	
		drawImageOnCanvas(floorPlanImage, "#floorplan");
		$("#floorplanInfo").html("<p><strong>floor plan:</strong> " + name + ", <strong>scale:</strong> " + scale + " cm/px, <strong>x-offset:</strong> " + xoffset + " px, <strong>y-offset:</strong> " + yoffset + " px</p>");
	};
	floorPlanImage.src = path;	
}
