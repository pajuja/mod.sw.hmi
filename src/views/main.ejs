<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="">
		<meta name="author" content="">

		<title>HMI</title>

		<link rel="stylesheet" href="/css/bootstrap.min.css">
		<!-- Optional theme -->
        <link rel="stylesheet" href="/css/bootstrap-theme.min.css">	
        <link rel="stylesheet" href="/css/style.css">			

		<script src="/js/NGSI.js"></script> 
		<script src="/js/jquery-3.3.1.min.js"></script> 		
		<script src="/js/bootstrap.min.js"></script> 	
		<script src="/js/bootbox.min.js"></script> 			
		<script src="/js/Chart.bundle.min.js"></script>
 
		<script>
		
			$(document).ready(function() {
							
				<% include ./overview/documentReady.ejs %>		
				<% include ./floorplan/documentReady.ejs %>		
				<% include ./task_management/documentReady.ejs %>
				<% include ./human_agents/documentReady.ejs %>
				<% include ./robots/documentReady.ejs %>
				<% include ./sensor_data/documentReady.ejs %>		
				<% if (user && user.role == "admin") { %>
					<% include ./system_settings/documentReady.ejs %>		
					<% include ./user_management/documentReady.ejs %>
				<% } %>		
			});	

			<% include ./generalFunctions.ejs %>			
			<% include ./overview/functions.ejs %>		
			<% include ./floorplan/functions.ejs %>		
			<% include ./task_management/functions.ejs %>
			<% include ./human_agents/functions.ejs %>
			<% include ./robots/functions.ejs %>
			<% include ./sensor_data/functions.ejs %>		
			<% if (user && user.role == "admin") { %>
				<% include ./system_settings/functions.ejs %>		
				<% include ./user_management/functions.ejs %>
			<% } %>		
		</script>
	
	</head>

	<body>
		<div class="container">
		    <div class="pull-right" >
				<form action="/logout" method="post">
					<button class="btn btn-default btn-sm" style=" margin-top:10px;" disabled>Logged in as <%= user.name %>&nbsp;</button>&nbsp;<button type="submit" class="btn btn-default btn-sm" style=" margin-top:10px;"><%= __("logout") %></button>
                </form>
			</div>
			<ul class="nav nav-tabs" style=" margin-top:10px;" role="tablist">
				<li class="active"><a href="#overviewTab" role="tab" data-toggle="tab">Overview</a></li>
				<li><a href="#floorplansTab" role="tab" data-toggle="tab">Floor Plan Management</a></li>	
				<li><a href="#taskManagementTab" role="tab" data-toggle="tab">Task Management</a></li>						
				<li><a href="#humanAgentsTab" role="tab" data-toggle="tab">Human Agents</a></li>
				<li><a href="#robotsTab" role="tab" data-toggle="tab">Robots</a></li>
				<li><a href="#sensorDataTab" role="tab" data-toggle="tab">Sensor Data</a></li>
				<% if (user && user.role == "admin") { %>  
				<li><a href="#usersTab" role="tab" data-toggle="tab">User Management</a></li>					
				<li><a href="#settingsTab" role="tab" data-toggle="tab">System Settings</a></li>				
				<% } %>
			</ul>
			<div class="tab-content">
				<div class="tab-pane active" id="overviewTab" style="margin-top:1.25rem;">
					<% include ./overview/tabContent.ejs %>					
				</div>
				<div class="tab-pane" id="floorplansTab" style="margin-top:1.25rem;">
					<% include ./floorplan/tabContent.ejs %>
				</div>
				<div class="tab-pane" id="taskManagementTab" style="margin-top:1.25rem;">
					<% include ./task_management/tabContent.ejs %>				

				</div>			
				<div class="tab-pane" id="humanAgentsTab" style="margin-top:1.25rem;">
					<% include ./human_agents/tabContent.ejs %>									
				</div>
				<div class="tab-pane" id="robotsTab" style="margin-top:1.25rem;">
					<% include ./robots/tabContent.ejs %>			
				</div>			
				<div class="tab-pane" id="sensorDataTab" style="margin-top:1.25rem;">
					<% include ./sensor_data/tabContent.ejs %>
				</div> 			
				<% if (user && user.role == "admin") { %>  			
					<div class="tab-pane" id="usersTab" style="margin-top:1.25rem;">
						<% include ./user_management/tabContent.ejs %>
					</div>
					<div class="tab-pane" id="settingsTab" style="margin-top:1.25rem;">
						<% include ./system_settings/tabContent.ejs %>
					</div>
                <% } %>				
			</div>	
		</div>
	</body>
</html>

<!-- TODO:
- Uploading a layout (PNG)
- Entering the scale (cm/px) for transformation, x-y-offset 
- (orientation will be done by SystemIntegrator) 

- Adding Sensors to the layout, including mapping-name to sensor id, appearance type (button, occupancy, ...), position, ...

- Displaying a layout     
- Displaying objects (agvs, sensors)
- Displaying the current position (x,y,theta) of the AGV in the HMI
- Displaying locations (palette position, charging, ...) (static)
- Displaying x-y-coordinates of objects(agvs, sensors)

- storing/retrieving of layout, scale and x-y-offset, configurations inside a database

- task specification text editor (first draft for copy/paste)

- custom user interface for engino use case will have individual Sensor Buttons to send the San entity (create/update needed)
  -- entities provided by SAN
-->	