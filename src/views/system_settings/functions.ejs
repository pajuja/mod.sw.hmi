function initSystemSettings() {	
	$("#ocb_host").val(<%- '"' + ocb_host + '"' %>);	
	$("#ocb_port").val(<%- '"' + ocb_port + '"' %>);	
	$("#ngsi_proxy_host").val(<%- '"' + ngsi_proxy_host + '"' %>);	
	$("#ngsi_proxy_port").val(<%- '"' + ngsi_proxy_port + '"' %>);
	$.ajax({
		type: "GET",
		url: "./api/config",
		dataType: "json",
		success: function (data) {
			$(data).each(function(i, item) {
				$("#ocb_host").val(item.ocb_host);	
				$("#ocb_port").val(item.ocb_port);	
				$("#ngsi_proxy_host").val(item.ngsi_proxy_host);	
				$("#ngsi_proxy_port").val(item.ngsi_proxy_port);
			});		
		}
	});
}

function submitSettings() {
	$.ajax({
		url: "./api/config",
		type: "POST",
		data: $("#systemSettings").serialize()
	}).done(function(data) {
		// delete old configs
		$.ajax({
			type: "GET",
			url: "./api/config",
			dataType: "json",
			success: function (data2) {					
				$(data2).each(function(i, item) {
					if (item._id != data._id) {
						$.ajax({
							url: "./api/config/" + item._id,
							type: 'DELETE',
							success: function(result) {}
						});
					}
				})

			}
		});
		$("#generalAlert").html("");
		showAndDismissAlert("success", "Settings saved!", "generalAlert");
		console.log("Output:");
		console.log(data);
		//location.reload(true);
		window.setTimeout(function(){window.location.reload(true)}, 3000);		
	}).fail(function(xhr, status, err){
		alert(xhr.responseText);
	});
	return false;					
}